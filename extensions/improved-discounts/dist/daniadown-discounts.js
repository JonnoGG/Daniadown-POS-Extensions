(()=>{var G=Object.create;var F=Object.defineProperty;var O=Object.getOwnPropertyDescriptor;var U=Object.getOwnPropertyNames;var W=Object.getPrototypeOf,j=Object.prototype.hasOwnProperty;var s=(e,t)=>()=>(e&&(t=e(e=0)),t);var z=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var H=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of U(t))!j.call(e,o)&&o!==r&&F(e,o,{get:()=>t[o],enumerable:!(i=O(t,o))||i.enumerable});return e};var J=(e,t,r)=>(r=e!=null?G(W(e)):{},H(t||!e||!e.__esModule?F(r,"default",{value:e,enumerable:!0}):r,e));var B=(e,t,r)=>new Promise((i,o)=>{var u=m=>{try{c(r.next(m))}catch(l){o(l)}},d=m=>{try{c(r.throw(m))}catch(l){o(l)}},c=m=>m.done?i(m.value):Promise.resolve(m.value).then(u,d);c((r=r.apply(e,t)).next())});var p,w=s(()=>{p=(...e)=>globalThis.shopify.extend(...e)});var D,L=s(()=>{D="Tile"});var I,R=s(()=>{I="Button"});var h,A=s(()=>{h="ScrollView"});var g,N=s(()=>{g="Screen"});var V=s(()=>{w();L();R();A();N()});var k=s(()=>{V()});var q=z(v=>{k();p("pos.home.tile.render",(e,t)=>{let r=o=>Number(o)>100,i=e.createComponent(D,{title:"DD Discounts",subtitle:"Employee & designer discounts",enabled:r(t.cart.subscribable.initial.subtotal),onPress:t.smartGrid.presentModal});t.cart.subscribable.subscribe(o=>{i.updateProps({enabled:Number(o.subtotal)>0})}),e.appendChild(i),e.mount()});p("pos.home.modal.render",(e,t)=>{let r=(d,c)=>B(v,null,function*(){let m=t.cart.subscribable.initial.lineItems,l=m.map(n=>n.variantId),C=m.map(n=>({id:n.uuid,qauntity:n.quantity})),a=yield(yield t.productSearch.fetchProductVariantsWithIds(l)).fetchedResources,x=[];for(let n=0;n<a.length;n++){let f,b=Number(a[n].price),S=Number(a[n].compareAtPrice),P=S*(1-c),T=l.indexOf(a[n].id),E=C[T].id,y=C[T].qauntity;if(S==null||S==0)f=(b*c*y).toFixed(2);else if(b>P)f=((b-P)*y).toFixed(2);else continue;let M={title:d,type:"FixedAmount",amount:f,test:"hello"},Q={lineItemUuid:String(E),lineItemDiscount:M};x.push(Q)}console.log(x);try{t.cart.bulkSetLineItemDiscounts(x),t.toast.show("Discount applied.",{duration:3e3})}catch(n){console.log(n)}}),i=e.createComponent(g,{name:"Discounts",title:"Available Discounts"}),o=e.createComponent(h),u=e.createComponent(I,{title:"Designer Discount - 25% off MSRP",onPress:()=>{r("Designer Discount",.25)}});o.appendChild(u),i.appendChild(o),e.appendChild(i),e.mount()})});var xe=J(q());})();
